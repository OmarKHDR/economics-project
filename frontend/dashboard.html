<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard - Load Management System</title>
	<link rel="stylesheet" href="assets/css/common.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
	<style>
		.loading {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 50vh;
			flex-direction: column;
		}

		.spinner {
			border: 4px solid rgba(0, 0, 0, 0.1);
			width: 36px;
			height: 36px;
			border-radius: 50%;
			border-left-color: var(--primary-color);
			animation: spin 1s linear infinite;
			margin-bottom: 20px;
		}

		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}

			100% {
				transform: rotate(360deg);
			}
		}
	</style>
</head>

<body class="light-mode">
	<div class="container">
		<header>
			<h1>Load Management System</h1>
			<div class="header-controls">
				<div class="theme-toggle">
					<i class="fas fa-moon"></i>
					<label class="switch">
						<input type="checkbox" id="theme-toggle">
						<span class="slider round"></span>
					</label>
					<i class="fas fa-sun"></i>
				</div>
			</div>
		</header>

		<div class="loading">
			<div class="spinner"></div>
			<p>Loading your dashboard...</p>
		</div>
	</div>

	<script src="assets/js/auth.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			// Check if user is logged in
			if (!isLoggedIn()) {
				window.location.href = 'index.html';
				return;
			}

			// Redirect based on role after a short delay 
			// (just to show the loading screen briefly)
			setTimeout(() => {
				redirectBasedOnRole();
			}, 1500);
		});
	</script>
</body>

</html>